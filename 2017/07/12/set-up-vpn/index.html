<!DOCTYPE html><html lang="zh-cn"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 拥抱科技时代应有的自由 · Lcrnice</title><meta name="description" content="拥抱科技时代应有的自由 - Lcrnice"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"></head><body><div id="mask" style="display: none;"><img id="mask-image" src="#" style=" "></div><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://weibo.com/u/2597892552" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/lcrnice" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">拥抱科技时代应有的自由</h1><div class="post-time">2017年7月12日</div><div class="post-content"><p><img src="http://7xt6wu.com1.z0.glb.clouddn.com/blog:setupVPN.png" alt="overview"></p>
<p>这段时间天朝要进一步封锁网络的新闻频频出现，既然天朝这么想阻止，那么本文就准备让读者对墙、翻墙原理有一个基础的认识，并在读完后能自主搭建基于<a href="https://zh.wikipedia.org/wiki/%E8%99%9A%E6%8B%9F%E4%B8%93%E7%94%A8%E6%9C%8D%E5%8A%A1%E5%99%A8" target="_blank" rel="external">VPS</a>的翻墙服务(macos环境)😈。  </p>
<h1 id="墙"><a href="#墙" class="headerlink" title="墙"></a>墙</h1><p><a href="https://zh.wikipedia.org/wiki/%E4%BA%92%E8%81%94%E7%BD%91" target="_blank" rel="external">互联网</a>说的直白一些，就是连接了全世界几十亿设备的网络。但是在我天朝，其实大家一直用的‘互联网’都是<em>局域网</em>，我们被国家保护在一堵四面环绕的围<strong>墙</strong>里。渴望自由的人们想出了一些方法来打破这种束缚，其中非常常用的一种方式就是<a href="https://zh.wikipedia.org/wiki/%E8%99%9B%E6%93%AC%E7%A7%81%E4%BA%BA%E7%B6%B2%E8%B7%AF" target="_blank" rel="external">VPN</a>。也就是本文说的这种。</p>
<p>那么墙的基本原理是什么？<br>平时大家访问一个网站，需要输入一个域名（就是哪个三达不溜点叉叉叉点卡姆的东西 eg:<a href="https://www.baidu.com" target="_blank" rel="external">www.baidu.com</a>）。输入域名回车后，浏览器需要通过DNS将域名解析成<strong>ip地址</strong>进行访问。所以当你访问网址时，实际你是在访问这个网址的ip地址。天朝就通过对DNS的劫持和污染，让你输入的<a href="https://www.google.com" target="_blank" rel="external"><strong>Google</strong></a>、<a href="https://www.facebook.com" target="_blank" rel="external"><strong>Facebook</strong></a>在解析的时候，返回一个错误的ip地址，自然就访问失败了。 ヽ(。&gt;д&lt;)ｐ</p>
<p>ps:知道了原理的同学，可能会想“那我如果知道了想访问网站的ip，是不是就可以直接访问了？”，答案是：yes！但是有一些ip也是被墙了的，不过别怕<a href="https://github.com/racaljk/hosts" target="_blank" rel="external">这里</a>有你想要的东西~ <img src="https://wanzao2.b0.upaiyun.com/system/pictures/116/original/27.png" alt="坏笑.gif~"></p>
<h1 id="关于VPN"><a href="#关于VPN" class="headerlink" title="关于VPN"></a>关于VPN</h1><p>VPN（虚拟专用网络）原本的目的是保护公司和公司之间的商业机密，通过加密的方式，让通讯者之外的人无法获取传输的内容。本文使用<a href="https://zh.wikipedia.org/wiki/Shadowsocks" target="_blank" rel="external">Shadowsocks</a>来实现这一过程。  </p>
<p><img src="http://7xt6wu.com1.z0.glb.clouddn.com/blog:vpn_%20theory.png" alt="vpn"></p>
<p>而正是得益于这种机制，外界无从得知我们想干嘛。😏<br>这一切的基础，就是要有一个<a href="https://zh.wikipedia.org/wiki/%E8%99%9A%E6%8B%9F%E4%B8%93%E7%94%A8%E6%9C%8D%E5%8A%A1%E5%99%A8" target="_blank" rel="external">VPS</a>啊！</p>
<h1 id="关于VPS"><a href="#关于VPS" class="headerlink" title="关于VPS"></a>关于VPS</h1><p>VPS（虚拟专用服务器）在购买之后，我们可以在上面做很多事情，比如搭建网站、存储<del>小电影</del>影视作品、爬虫等。买完VPS的时候，需要选择<em>顺手的</em>操作系统，常用的有<a href="https://zh.wikipedia.org/wiki/CentOS" target="_blank" rel="external">CentOS</a>、<a href="https://zh.wikipedia.org/wiki/Debian" target="_blank" rel="external">Debian</a>、<a href="https://zh.wikipedia.org/wiki/Ubuntu" target="_blank" rel="external">Ubuntu</a>等，这个选择上就仁者见仁了，反正我现在在用CentOS 😎  </p>
<p>VPS其实跟现在你用的电脑没有太大差别，只不过VPS的操作大多在<a href="https://zh.wikipedia.org/wiki/%E7%B5%82%E7%AB%AF" target="_blank" rel="external">Terminal(终端)</a>进行，所以需要使用者对终端命令有所了解，比如<a href="https://zh.wikipedia.org/wiki/Yellowdog_Updater,_Modified" target="_blank" rel="external"><strong>yum</strong></a>是CentOS下的包管理工具，<a href="https://en.wikipedia.org/wiki/Firewalld" target="_blank" rel="external"><strong>firewalld</strong></a>是CentOS下的防火墙操作命令等。  </p>
<p>有很多服务商提供VPS的购买服务，常见的有<a href="https://www.vultr.com/" target="_blank" rel="external">Vultr</a>、<a href="https://www.digitalocean.com/" target="_blank" rel="external">Digital Ocean</a>、<a href="https://www.linode.com/" target="_blank" rel="external">Linode</a>等，这几家价钱差不多，我是在Vultr上买的$5/month的服务，<a href="http://www.vultr.com/?ref=7038081" target="_blank" rel="external">here</a>是我的推荐码，通过点<a href="http://www.vultr.com/?ref=7038081" target="_blank" rel="external">这个</a>链接注册的话，会有惊喜哦💰。  </p>
<p>对墙、VPN以及VPS有了基础的认识之后，是时候搞出一些事情了！</p>
<h1 id="搭建翻墙环境之——服务端"><a href="#搭建翻墙环境之——服务端" class="headerlink" title="搭建翻墙环境之——服务端"></a>搭建翻墙环境之——服务端</h1><p>搞事情当然先从购买VPS开始啦~</p>
<h3 id="购买服务器"><a href="#购买服务器" class="headerlink" title="购买服务器"></a>购买服务器</h3><p>购买服务器国人一般都会买<em>新加坡</em>，或者<em>日本</em>的服务器，理论上相对较<em>美国</em>的服务器会快一些。</p>
<p>存储空间大小、带宽等配置可根据自身需求定义。</p>
<p>购买完成后，会有几十秒的服务器配置时间，配置完成后，就可以<strong>登录</strong>刚买的VPS了。</p>
<h3 id="登录服务器"><a href="#登录服务器" class="headerlink" title="登录服务器"></a>登录服务器</h3><p>终端中输入:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ssh 用户名@ip地址</span><br></pre></td></tr></table></figure>
<p>第一次登录会将此服务器信息加入<code>known hosts</code>中，询问是否继续时输入<code>yes</code></p>
<p>紧接着输入服务器密码，终端不会显示已输入密码，小心手滑打错哦</p>
<p><strong>Enter! I’m in!</strong></p>
<p><img src="https://wanzao2.b0.upaiyun.com/system/pictures/24/original/6.png" alt="happy"></p>
<p>在新购买的服务器内，可以 ping 一下 google</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ping -c 10 google.com</span><br></pre></td></tr></table></figure>
<p>你会在 ping 10次之后自动结束，如果可通过尾部信息查看丢包率、耗时信息等</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">--- google.com ping statistics ---</span><br><span class="line">10 packets transmitted, 10 received, 0% packet loss, time 9012ms</span><br><span class="line">rtt min/avg/max/mdev = 2.129/2.212/2.310/0.075 ms</span><br></pre></td></tr></table></figure>
<h3 id="安装-shadowsocks"><a href="#安装-shadowsocks" class="headerlink" title="安装 shadowsocks"></a>安装 shadowsocks</h3><p>安装 <strong>shadowsocks</strong> 其实非常简单，只需要安装 python 后，通过 pip 安装即可，写了一个非常简单的 shell</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#! bin/sh</span><br><span class="line"></span><br><span class="line">yum -y install python-pip   # 1.安装 python</span><br><span class="line">pip install shadowsocks     # 2.通过 pip 安装 shadowsocks</span><br><span class="line">cp ./shadowsocks.json /etc/ # 3.将已有的 shadowsocks.json 文件拷贝到 /etc/ 目录</span><br><span class="line">firewall-cmd --permanent --add-port=2333/tcp    # 4.允许端口 2333 通过防火墙</span><br><span class="line">firewall-cmd --reload       # 5.重新加载防火墙配置</span><br><span class="line">ssserver -c /etc/shadowsocks.json -d start      # 6.以后台模式开启 shadowsocks</span><br></pre></td></tr></table></figure>
<p>在服务器中创建一个 install.sh 文件，将如上代码拷贝进去并保存</p>
<p>运行 shell 之前，友情提示：你应该会获得一个 <em>No such file…</em> 的错误…</p>
<p>那是因为第<strong>3</strong>步，拷贝 shadowsocks.json 文件，导致的，这个脚本是我将放有配置好的 .json 文件 install.sh 文件的文件夹拷贝到服务器之后执行的，你可以不用使用<em>scp</em>进行拷贝，在执行脚本之前，先创建如下文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /etc</span><br></pre></td></tr></table></figure>
<p>进入 <strong>etc</strong> 目录，创建新的 shadowsocks.json 文件，并将如下内容拷贝进入，修改<code>your_port、your_password</code>为自己的端口、密码，保存</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;server&quot;:&quot;0.0.0.0&quot;,</span><br><span class="line">    &quot;server_port&quot;:your_port,</span><br><span class="line">    &quot;local_address&quot;: &quot;127.0.0.1&quot;,</span><br><span class="line">    &quot;local_port&quot;:1080,</span><br><span class="line">    &quot;password&quot;:&quot;your_password&quot;,</span><br><span class="line">    &quot;timeout&quot;:300,</span><br><span class="line">    &quot;method&quot;:&quot;aes-256-cfb&quot;,</span><br><span class="line">    &quot;fast_open&quot;: true</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>创建完之后执行脚本</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sh install.sh</span><br></pre></td></tr></table></figure>
<p>服务端配置 Done!</p>
<h1 id="搭建翻墙环境之——本地"><a href="#搭建翻墙环境之——本地" class="headerlink" title="搭建翻墙环境之——本地"></a>搭建翻墙环境之——本地</h1><p>本地需要和VPS搭建好的环境打通联系，就需要下载<a href="https://github.com/shadowsocks/ShadowsocksX-NG" target="_blank" rel="external">ShadowsocksX</a>应用了，下载后运行，点击<em>小飞机</em>-服务器-打开服务器设定，点击➕ 添加一个新的服务器配置</p>
<p>其中<br>地址=服务器ip<br>端口=如上你自己修改的<code>your_port</code>端口<br>密码=如上你自己修改的<code>your_password</code>密码</p>
<p>确定，本地配置 Done!</p>
<h1 id="Final"><a href="#Final" class="headerlink" title="Final"></a>Final</h1><p>此时你的<code>shadowsocks</code>应该是打开状态，VPS的配置也已经完成并启动，打开浏览器输入 <a href="google.com">google.com</a>，就可以尽情享受自由的感觉了~</p>
<p><img src="https://wanzao2.b0.upaiyun.com/system/pictures/6/original/66.png" alt="yeah"></p>
<p>基于我的初衷只是让读者了解一些概念，和一些实际操作的步骤，有很多细节如果展开的话，两三篇博客都不够…所以，如果有兴许可以翻墙之后去谷歌搜索哦~</p>
</div></article></div></section><footer><div class="paginator"><a href="/2017/08/16/让脚本去做重复的事/" class="prev">上一篇</a><a href="/2016/08/17/新版Reveal的正确使用方式-1-6-3/" class="next">下一篇</a></div><div class="copyright"> <p>感兴趣可以关注<a href="https://github.com/Lcrnice">我的GitHub</a> 或关注微博<a href="http://weibo.com/u/2597892552/">@Lcrnice丶</a></p><p>© 2015 - 2017 <a href="http://lcrnice.github.com">Lcrnice</a> · Powered by Hexo</p></div></footer></div><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script></body></html>